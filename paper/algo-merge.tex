\begin{algorithm}
	\SetAlgoLined
	\caption{Merge Conversations \todo{@kq: simplify this}}
	\label{algo:merge}
	\SetKwInOut{Input}{inputs}
	\SetKwInOut{Output}{output}
	\SetKwProg{MergeConversations}{MergeConversations}{}{}
	\MergeConversations{$(conversations)$}{
		\Input{$conversations$}
		\Output{$C$}
		$mergedConversations \gets []$\\
		$H \gets HashMap$\\
		\ForEach{$conversation \in conversations$\\}{
			$index \gets H.get(conversation[0].Channel)$\\
			\If{$index \neq null$ and $conversation$ overlap with $mergedConvsations[index]$\\}{
				\ForEach{$message \in conversation$}{
					\If{$message$ is older than $mergedConversations[index]$\\}{
						$mergedConversations[index].append(message)$\\
					}
					\ElseIf{$message.Score>0$\\}{
						Update the score to $mergedConversations$\\
					}
				}
			}
			\Else{
				$mergedConvsations.append(conversation)$
				$H[conversation[0].Channel] = len(C) -1$
			}
		}
		\Return{$mergedConvsations$}
	}
\end{algorithm}	